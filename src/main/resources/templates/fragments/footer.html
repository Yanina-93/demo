<!-- src/main/resources/templates/fragments/footer.html -->
<div th:fragment="footer">
    <footer class="w-full bg-sky-700 py-4 mt-10">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between text-white px-4">
            <div class="mb-2 md:mb-0">
                <a href="/quotes/my" class="hover:underline font-semibold">Ver mis Quotes</a>
            </div>
            <div>
                <a href="/api/currency/eur-clp" class="hover:underline font-semibold">Ver tasa EUR/CLP</a>
            </div>
            <div class="text-xs opacity-70 mt-2 md:mt-0">&copy; 2025 UniLifeTracker</div>
        </div>
    </footer>
</div>
<!--  Bot√≥n para mostrar la motivaci√≥n
    <button onclick="showQuotePopup()">Get some Motivation</button>

   Pop-up Modal para mostrar la quote 
    <div id="quotePopup"
        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:9999; justify-content:center; align-items:center;">
        <div style="background:#fff; border-radius:18px; padding:28px 20px; min-width:290px; max-width:80vw; box-shadow:0 4px 32px #0003; text-align:center; position:relative;">
            <p id="quoteText" style="font-size:1.1rem; margin-bottom:20px;"></p>
            <button onclick="saveQuote()" style="margin: 0 6px; background:#4b9cff; color:#fff; border:none; padding:8px 20px; border-radius:7px; cursor:pointer;">Save Quote</button>
            <button onclick="closeQuotePopup()" style="margin: 0 6px; background:#ccc; color:#333; border:none; padding:8px 20px; border-radius:7px; cursor:pointer;">Close</button>
            <span id="saveStatus" style="display:block; margin-top:10px; color:green; font-size:0.96rem;"></span>
        </div>
    </div>

    <script>
    function showQuotePopup() {
        document.getElementById('saveStatus').innerText = '';
        document.getElementById('quoteText').innerText = 'Loading...';
        document.getElementById('quotePopup').style.display = 'flex';

        fetch('/api/motivation/random-quote')
            .then(res => res.text())
            .then(text => {
                document.getElementById('quoteText').innerText = text;
            })
            .catch(() => {
                document.getElementById('quoteText').innerText = "Couldn't load quote. Try again!";
            });
    }

    function closeQuotePopup() {
        document.getElementById('quotePopup').style.display = 'none';
    }

    function saveQuote() {
        const quoteText = document.getElementById('quoteText').innerText;
        fetch('/api/quotes', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ text: quoteText })
        })
        .then(response => {
            if (response.ok) {
                document.getElementById('saveStatus').innerText = 'Quote Saved!';
            } else {
                document.getElementById('saveStatus').innerText = 'Failed to save quote.';
            }
            setTimeout(closeQuotePopup, 1500);
        })
        .catch(() => {
            document.getElementById('saveStatus').innerText = 'Error saving quote.';
        });
    }
    </script>

    <section class="my-quotes-section">
        <h3>My Motivational Quotes</h3>
        <div id="myQuotesContainer" class="quote-list"></div>
        <button onclick="loadMyQuotes()" class="reload-quotes-btn">üîÑ Reload Quotes</button>
    </section>

    <script>
        function loadMyQuotes() {
        fetch('/api/quotes/my')
            .then(res => res.json())
            .then(list => {
                const cont = document.getElementById('myQuotesContainer');
                if (!list.length) {
                    cont.innerHTML = "<p>No motivational quotes saved yet!</p>";
                    return;
                }
                cont.innerHTML = "<ul>" + 
                    list.map(q => `
                        <li>
                            ${q.text}
                            <button onclick="deleteMyQuote(${q.id})">üóëÔ∏è</button>
                        </li>
                    `).join('') + "</ul>";
            });
    }


        // Eliminar quote
        function deleteQuote(id) {
            if (!confirm('Are you sure you want to delete this quote?')) return;
            fetch('/api/quotes/' + id, { method: 'DELETE' })
                .then(() => loadMyQuotes());
        }

        // Recarga autom√°tica al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', loadMyQuotes);
        </script>


    <button onclick="showCurrencyPopup()">Ver tasa EUR/CLP</button>

    <div id="currencyPopup" style="display:none; position:fixed; top:30%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:30px; box-shadow:0 2px 18px #0002; border-radius:15px;">
        <h3>Conversi√≥n EUR/CLP</h3>
        <div id="currencyContent">Cargando...</div>
        <button onclick="closeCurrencyPopup()">Cerrar</button>
    </div>

    <script>
    function showCurrencyPopup() {
        document.getElementById('currencyContent').innerText = "Cargando...";
        document.getElementById('currencyPopup').style.display = 'block';

        fetch('/api/currency/eur-clp')
        .then(res => res.json())
        .then(rate => {
            document.getElementById('currencyContent').innerHTML = `
            <b>1 EUR = ${rate} CLP</b>
            `;
        })
        .catch(() => {
            document.getElementById('currencyContent').innerText = "No se pudo obtener la tasa.";
        });
    }

    function closeCurrencyPopup() {
        document.getElementById('currencyPopup').style.display = 'none';
    }
    </script> -->